import java.util.*;
import java.io.*;

public class MovieReader
{
    private String fileName;

    public MovieReader(String fileName)
    {
        this.fileName = fileName;
    }

    public List<Movie> read() throws IOException
    {
        BufferedReader br = new BufferedReader(new FileReader(fileName));
        List<Movie> movies = read1(br);
        br.close();
        return movies;
    }
    
    private List<Movie> read1(BufferedReader br)
    {
        List<Movie> movies = new ArrayList<>();
        try{
            String line = br.readLine();
            while(br.ready() && line != null){
                line = br.readLine();
                String[] splitInfo = line.split(";");
                String title = splitInfo[0].trim();
                int year = Integer.parseInt(splitInfo[1].trim());
                String genre = splitInfo[2].trim();
                double rating = Double.parseDouble(splitInfo[3].trim());
                
                Movie m = new Movie(title, year, genre, rating);
                movies.add(m);
            }
        }catch(IOException e){
            return null;
        }
        return movies;
    }
}
